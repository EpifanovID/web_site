from django.shortcuts import render, redirect

# Структура данных для каталога товаров
products = [
    {"id": 1, "name": "Видеокарта RTX 4070", "price": 79999, 
     "description": "Мощная видеокарта для игр и работы. Обеспечивает высокую частоту кадров в современных играх, поддерживает трассировку лучей и DLSS 3.0. "
                    "Благодаря архитектуре Ada Lovelace, обеспечивает потрясающую энергоэффективность и производительность. Поддержка HDMI 2.1 и DisplayPort 1.4a "
                    "позволяет наслаждаться изображением в разрешении 4K при 120 Гц. Отличный выбор для киберспорта, видеомонтажа и потоковой трансляции.", 
     "image": "\myapp\images\products\Product_1.jpg"},

    {"id": 2, "name": "Процессор Intel i7-13700K", "price": 45999, 
     "description": "Отличный процессор для любых задач. 16 ядер и высокая тактовая частота делают его идеальным для игр и многозадачности. "
                    "Процессор оснащен 8 производительными и 8 энергоэффективными ядрами, что позволяет достичь максимальной мощности при минимальном энергопотреблении. "
                    "Благодаря технологии Intel Turbo Boost 3.0 разгоняется до 5.4 ГГц, что обеспечивает плавную работу даже самых ресурсоемких приложений. "
                    "Поддержка DDR5 и PCIe 5.0 делает его отличным выбором для современных игровых и рабочих систем.", 
     "image": "\myapp\images\products\Product_2.jpg"},

    {"id": 3, "name": "Материнская плата ASUS Z790", "price": 29999, 
     "description": "Поддержка последних процессоров Intel. Оснащена мощной системой питания, поддержкой PCIe 5.0 и быстрыми интерфейсами для SSD. "
                    "Использует высококачественные компоненты и улучшенную систему охлаждения для стабильной работы под нагрузкой. "
                    "Поддерживает разгон оперативной памяти до 7200 МГц, что позволяет максимально раскрыть потенциал высокопроизводительных комплектующих. "
                    "Оснащена встроенным Wi-Fi 6E, 2.5G Ethernet и USB 3.2 Gen 2 для высокой скорости передачи данных и удобного подключения периферии.", 
     "image": "\myapp\images\products\Product_3.jpg"},

    {"id": 4, "name": "Оперативная память Kingston 32GB", "price": 14999, 
     "description": "Скоростная память DDR5 для максимальной производительности. Высокая частота и низкие задержки обеспечивают плавную работу системы. "
                    "Разработана для энтузиастов, требующих максимальной пропускной способности и стабильности при высокой нагрузке. "
                    "Благодаря встроенному контроллеру питания и усовершенствованной системе охлаждения, оперативная память работает при оптимальных температурах. "
                    "Совместима с материнскими платами ведущих производителей и поддерживает профили XMP 3.0 для легкого разгона.", 
     "image": "\myapp\images\products\Product_4.jpg"},

    {"id": 5, "name": "SSD Samsung 1TB NVMe", "price": 12999, 
     "description": "Быстрый накопитель для загрузки системы и программ. Скорость чтения до 7000 МБ/с, что ускоряет запуск игр и приложений. "
                    "Использует передовую технологию V-NAND для повышения производительности и долговечности. "
                    "Обладает высокой энергоэффективностью и поддержкой аппаратного шифрования для защиты данных. "
                    "Идеально подходит для геймеров, разработчиков и креативных профессионалов, работающих с большими объемами данных.", 
     "image": "\myapp\images\products\Product_5.jpg"},

    {"id": 6, "name": "Блок питания Corsair 750W", "price": 11999, 
     "description": "Надежный блок питания с сертификатом 80+ Gold. Обеспечивает стабильное питание мощных компонентов и защиту от перепадов напряжения. "
                    "Использует высококачественные японские конденсаторы для увеличенного срока службы. "
                    "Бесшумная работа за счет интеллектуального управления вентилятором с динамическим режимом охлаждения. "
                    "Поддерживает модульное подключение кабелей, что облегчает сборку и улучшает циркуляцию воздуха в корпусе.", 
     "image": "\myapp\images\products\Product_6.jpg"},

    {"id": 7, "name": "Корпус NZXT H510", "price": 8999, 
     "description": "Стильный и просторный корпус для вашей сборки. Продуманная система охлаждения и удобная компоновка кабелей. "
                    "Прочный стальной каркас и закаленное стекло придают корпусу премиальный внешний вид. "
                    "Поддержка радиаторов водяного охлаждения до 280 мм, а также вместительные отсеки для хранения SSD и HDD. "
                    "Идеально подходит для пользователей, которым важны эстетика и функциональность в одном корпусе.", 
     "image": "\myapp\images\products\Product_7.jpg"},

    {"id": 8, "name": "Система охлаждения Deepcool", "price": 6999, 
     "description": "Эффективное охлаждение для процессоров Intel и AMD. Снижает температуру даже при высоких нагрузках и обеспечивает тихую работу. "
                    "Использует высокопроизводительный вентилятор с гидродинамическим подшипником для увеличенного срока службы. "
                    "Компактный дизайн позволяет легко установить систему охлаждения в большинство корпусов. "
                    "Совместима с большинством современных платформ, поддерживает разгон процессоров без перегрева.", 
     "image": "\myapp\images\products\Product_8.jpg"},

    {"id": 9, "name": "Игровая мышь Logitech G502", "price": 5999, 
     "description": "Эргономичная игровая мышь с высоким DPI. Настраиваемые кнопки и чувствительный сенсор делают её идеальным выбором для геймеров. "
                    "Поддержка технологии HERO 25K обеспечивает точность движений без задержек. "
                    "Регулируемый вес и балансировка позволяют настроить устройство под личные предпочтения. "
                    "Прочная конструкция и долговечные переключатели гарантируют надежную работу на протяжении многих лет.", 
     "image": "\myapp\images\products\Product_9.jpg"},

    {"id": 10, "name": "Монитор LG UltraGear 27", "price": 32999, 
     "description": "144 Гц, 1 мс, IPS – идеальный монитор для геймеров. Поддержка G-Sync и HDR10 для улучшенной цветопередачи. "
                    "Высокая контрастность и точная цветопередача делают его отличным выбором как для игр, так и для работы с графикой. "
                    "Тонкие рамки и эргономичная подставка обеспечивают удобное расположение на рабочем месте. "
                    "Совместим с технологией Adaptive Sync, что снижает разрывы кадров и делает изображение плавным.", 
     "image": "\myapp\images\products\Product_10.jpg"},
         {"id": 11, "name": "Механическая клавиатура HyperX Alloy FPS", "price": 7999, 
     "description": "Механическая клавиатура HyperX Alloy FPS - это отличное решение для серьезных геймеров, которые ценят скорость, точность и комфорт при игре. "
                    "Оснащена надежными переключателями HyperX с тактильным откликом, которые обеспечивают отличное ощущение при каждом нажатии. "
                    "Корпус клавиатуры выполнен из прочного металлического сплава, что делает её устойчивой к повреждениям и долговечной. "
                    "Компактный и эргономичный дизайн позволяет разместить клавиатуру даже на ограниченном пространстве, не жертвуя комфортом. "
                    "Дополнительная подсветка и функциональные клавиши дают пользователю полный контроль над игровым процессом.", 
     "image": "\myapp\images\products\Product_11.jpg"},

    {"id": 12, "name": "Наушники HyperX Cloud II", "price": 10999, 
     "description": "Наушники HyperX Cloud II - это игровая гарнитура премиум-класса с объемным звуком 7.1, которая идеально подходит для длительных игровых сессий. "
                    "Комфортные амбушюры с эффектом памяти обеспечивают удобство даже во время самых продолжительных игр. "
                    "Высококачественный микрофон с шумоподавлением гарантирует четкую передачу голоса, что делает общение с командой более приятным и продуктивным. "
                    "Система виртуального звука 7.1 погружает в атмосферу игры, создавая эффект присутствия. Наушники подходят для всех типов игровых платформ, "
                    "обеспечивая отличный звук и комфорт на протяжении всей игры.", 
     "image": "\myapp\images\products\Product_12.jpg"},
]


# Представление каталога
def catalog(request):
    context = {'products': products}
    print("\n\n\n\n\n")
    print(context)
    print("\n\n\n\n\n")
    return render(request, 'catalog.html', context)

def product(request, name):
    product = None
    for item in products:
        if item["name"] == name:
            product = item
            break
    if product is None:
        return render(request, '404.html')
    context = {'product': product}
    return render(request, 'product.html', context)

def home(request):
    return render(request, 'home.html')

def about(request):
    return render(request, 'about.html')

def contacts(request):
    return render(request, 'contacts.html')

def task(request):
    return render(request, 'task.html')

def task_result(request, years, century):
    """
    Обработчик для задачи.
    Принимает years и century как позиционные аргументы.
    """

    try:
        # Разделяем строку с годами по пробелам
        year_list = years.split()

        # Проверка, что список годов не пустой
        if not year_list:
            raise ValueError("Список годов пуст.")

        # Преобразуем строки в целые числа
        year_list = [int(year) for year in year_list]

        # Проверка, что столетие является корректным целым числом
        century = int(century)

        # Считаем количество годов, относящихся к указанному столетию
        count = 0
        for year in year_list:
            if (year - 1) // 100 + 1 == century:
                count += 1
        
        # Передаем данные в шаблон
        context = {
            'years': years,
            'century': century,
            'result': count,
        }
        return render(request, 'task_result.html', context)
    
    except ValueError as e:
        # Обработка ошибок, если данные некорректны
        error_message = str(e)
        return render(request, 'task_result.html', {'error': error_message})

def author(request):
    # Данные о мне
    author_info = {
        "name": "Епифанов Илья Дмитриевич",
        "photo": "\myapp\images\\author\Епифанов Илья аватарка.jpeg",
        "email": "idepifanov@edu.hse.ru",
        "phone": "+7 (926) 090-29-73"
    }

    # Данные о программе
    program_info = {
        "name": "Прикладная математика",
        "description": "Программа направлена на подготовку специалистов, способных решать широкий спектр задач современной науки и техники, опираясь на самые современные достижения в области математики, физики, информационных технологий с использованием средств вычислительной техники. "
                        "Студенты получают знания в области технологий проектирования динамических систем; технологий обработки, передачи, хранения и защиты информации; технологий разработки и сопровождения специализированного программного обеспечения; технологий математического моделирования сложных физико-механических систем и процессов, включая наноструктуры и космические системы; технологий создания интеллектуальных информационных систем, систем навигации и управления.",
        "supervisor": {
            "name": "Преснова Анна Павловна",
            "photo": "myapp\images\\author\Преснова Анна Павловна.jpeg",
            "email": "apresnova@hse.ru"
        },
        "manager": {
            "name": "Горшкова Альбина Вартановна",
            "photo": "myapp\images\\author\Горшкова Альбина Вартановна.jpg",
            "email": "agorshkova@hse.ru"
        }
    }

    classmates = [
        {
            "name": "Сокурсник 1",
            "photo": "myapp\images\\author\Адам Смит.png",
            "email": "classmate1@edu.hse.ru",
            "phone": "+7 (111) 111-11-11"
        },
        {
            "name": "Сокурсник 2",
            "photo": "myapp\images\\author\Адам Смит.png",
            "email": "classmate2@edu.hse.ru",
            "phone": "+7 (111) 111-11-12"
        }
    ]

    context = {
        'author_info': author_info,
        'program_info': program_info,
        'classmates': classmates
    }

    return render(request, 'author.html', context)